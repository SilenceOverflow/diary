---
layout: post
title: "0420 - 数据记录" 
date: 2017-04-20 
category: soyainedaily 
excerpt: ""
---

## 开发手记

1. 处理表单的一些基础知识。
	- 获取所有表单：`document.forms` 可以获取页面中的所有表单
	- 获取特定表单：对上一条也可通过数值索引或者 name 值获取，`document.forms[i]` 或 `docuement.forms["form"]`。但除此之外，也不要忘记，同样也是可以通过普通的 DOM 方法来获取表单元素的。
	- 获取表单中的字段：同上，可通过 `elements` 属性的数值索引或者 name 值获得。同样，也可以直接 DOM 获取其 `value` 属性值。
		```js
		var form = document.getElements.getElementById("form");
		var field1 = form.elements[0];
		var filed2 = form.elements["textbox1"];
		// 此处 textbox1 对应的是 <input name="textbox">
		```
2. 关于逻辑与组织。业务逻辑没想清楚的时候，文件结构的组织、路由的组织都是很混乱的，逻辑搭建一个地图，这个地图是根，重要性不言而喻。

## 今天的主题 - 数据记录

突然想整理一下睡眠数据了。

<div id="main" style="width: 100%; height: 500px;"></div>

晚上更新日记的时候才发现网站上的页面挂了……明天来修理吧。

<script type="text/javascript" src="/diary/js/echarts.common.min.js"></script>
<script>
	var myChart = echarts.init(document.getElementById('main'));
	
	var data = [
//			["Go to sleep", "Get up", "Date", "Sleep time"], 
	
["02:45:16", "07:04:16", "2017/4/19", "04:19:00"],
["00:03:49", "07:06:10", "2017/4/18", "07:02:21"],
["23:59:23", "08:04:33", "2017/4/17", "08:05:10"],
["00:20:15", "06:52:55", "2017/4/16", "06:32:40"],
["00:05:49", "06:45:46", "2017/4/15", "06:39:57"],
["23:59:09", "08:33:53", "2017/4/14", "08:34:44"],
["23:58:05", "06:58:18", "2017/4/13", "07:00:13"],
["00:58:49", "06:59:36", "2017/4/12", "06:00:47"],
["22:17:49", "07:20:16", "2017/4/11", "09:02:27"],
["23:43:33", "07:09:21", "2017/4/10", "07:25:48"],
["22:52:39", "07:08:37", "2017/4/9", "08:15:58"],
["00:07:38", "06:37:00", "2017/4/8", "06:29:22"],
["23:59:25", "07:58:50", "2017/4/7", "07:59:25"],
["00:53:45", "07:13:02", "2017/4/6", "06:19:17"],
["00:42:28", "06:32:04", "2017/4/5", "05:49:36"],
["00:05:50", "07:15:34", "2017/4/4", "07:09:44"],
["23:04:01", "07:42:56", "2017/4/3", "08:38:55"],
["23:40:45", "06:23:31", "2017/4/2", "06:42:46"],
["23:32:38", "07:03:44", "2017/4/1", "07:31:06"],
["00:31:30", "07:55:19", "2017/3/31", "07:23:49"],
["00:00:08", "07:46:33", "2017/3/30", "07:46:25"],
["00:19:58", "07:57:00", "2017/3/29", "07:37:02"],
["00:53:26", "07:01:14", "2017/3/28", "06:07:48"],
["23:07:06", "08:28:27", "2017/3/27", "09:21:21"],
["21:49:03", "08:14:44", "2017/3/26", "10:25:41"],
["01:34:54", "10:06:56", "2017/3/25", "08:32:02"],
["01:48:19", "07:54:24", "2017/3/24", "06:06:05"],
["00:42:00", "07:43:21", "2017/3/23", "07:01:21"],
["00:42:39", "08:11:57", "2017/3/22", "07:29:18"],
["00:26:21", "07:58:17", "2017/3/21", "07:31:56"],
["01:25:35", "07:18:45", "2017/3/20", "05:53:10"],
["00:35:47", "08:09:03", "2017/3/19", "07:33:16"],
["00:13:58", "08:31:11", "2017/3/18", "08:17:13"],
["04:01:04", "08:24:09", "2017/3/18", "04:23:05"],
["23:35:05", "01:25:09", "2017/3/17", "01:50:04"],
["00:38:14", "08:20:48", "2017/3/16", "07:42:34"],
["01:03:42", "10:00:07", "2017/3/15", "08:56:25"],
["00:38:25", "08:33:27", "2017/3/14", "07:55:02"],
["00:57:13", "08:30:46", "2017/3/13", "07:33:33"],
["00:43:55", "08:23:55", "2017/3/12", "07:40:00"],
["23:40:06", "08:18:53", "2017/3/11", "08:38:47"],
["23:23:17", "09:34:14", "2017/3/10", "10:10:57"],
["22:42:57", "07:24:14", "2017/3/9", "08:41:17"],
["00:15:49", "07:10:59", "2017/3/8", "06:55:10"],
["23:22:24", "07:39:55", "2017/3/7", "08:17:31"],
["23:38:04", "07:28:07", "2017/3/6", "07:50:03"],
["00:23:03", "09:43:19", "2017/3/5", "09:20:16"],
		['23:56:37', '06:57:09', '2017/3/4', '07:00:32'], 
		['00:10:31', '08:39:11', '2017/3/3', '08:28:40'], 
		['23:47:02', '07:25:45', '2017/3/2', '07:38:43'], 
		['23:48:43', '09:50:49', '2017/3/1', '10:02:06'], 
		['00:10:17', '08:13:17', '2017/2/28', '08:03:00'], 
		['00:49:38', '07:40:57', '2017/2/27', '06:51:19'], 
		['00:29:24', '07:44:19', '2017/2/26', '07:14:55'], 
		['00:14:27', '07:23:12', '2017/2/25', '07:08:45'], 
		['00:27:21', '09:35:30', '2017/2/24', '09:08:09'], 
		['01:53:18', '09:16:21', '2017/2/23', '07:23:03'], 
		['00:33:56', '08:36:11', '2017/2/22', '08:02:15'], 
		['23:43:00', '06:31:40', '2017/2/21', '06:48:40'], 
		['03:20:23', '10:00:23', '2017/2/20', '06:40:00'], 
//			['00:45:06', '02:57:51', '2017/2/20', '02:12:45'], 
		['00:42:49', '09:17:19', '2017/2/19', '08:34:30'], 
		['00:59:34', '09:30:35', '2017/2/18', '08:31:01'], 
		['02:28:10', '08:05:12', '2017/2/17', '05:37:02'], 
//			['02:08:08', '02:16:08', '2017/2/17', '00:08:00'], 
		['01:22:21', '07:42:22', '2017/2/16', '06:20:01'], 
//			['00:19:00', '00:44:30', '2017/2/16', '00:25:30'], 
		['00:21:57', '09:15:53', '2017/2/15', '08:53:56'], 
		['02:26:00', '08:32:47', '2017/2/14', '06:06:47'], 
		['23:22:50', '07:16:06', '2017/2/13', '07:53:16'], 
		['00:56:34', '07:48:24', '2017/2/12', '06:51:50'], 
		['23:43:17', '08:27:10', '2017/2/11', '08:43:53'], 
		['02:37:54', '08:40:45', '2017/2/10', '06:02:51'], 
		['00:53:08', '07:57:37', '2017/2/9', '07:04:29'], 
		['01:47:07', '09:10:09', '2017/2/8', '07:23:02'], 
		['00:09:47', '07:47:42', '2017/2/7', '07:37:55'], 
		['23:56:45', '07:53:04', '2017/2/6', '07:56:19'], 
		['22:40:49', '07:27:21', '2017/2/5', '08:46:32'], 
		['23:30:49', '07:40:30', '2017/2/4', '08:09:41'], 
		['23:05:20', '08:04:46', '2017/2/3', '08:59:26'], 
		['22:12:39', '07:57:08', '2017/2/2', '09:44:29'], 
		['22:04:46', '07:44:02', '2017/2/1', '09:39:16'], 
		['23:35:22', '06:16:20', '2017/1/31', '06:40:58'], 
		['23:21:28', '07:21:18', '2017/1/30', '07:59:50'], 
		['00:29:05', '07:41:42', '2017/1/29', '07:12:37'], 
		['23:03:15', '08:01:52', '2017/1/28', '08:58:37'], 
		['01:04:52', '07:09:33', '2017/1/27', '06:04:41'], 
		['21:46:48', '08:04:24', '2017/1/26', '10:17:36'], 
		['23:11:18', '07:53:17', '2017/1/25', '08:41:59'], 
		['22:24:20', '07:14:20', '2017/1/24', '08:50:00'], 
		['22:25:57', '07:40:57', '2017/1/23', '09:15:00'], 
		['00:23:45', '07:20:43', '2017/1/22', '06:56:58'], 
		['23:33:45', '07:24:15', '2017/1/21', '07:50:30'], 
		['23:44:58', '05:48:03', '2017/1/20', '06:03:05'], 
		['22:54:43', '08:08:06', '2017/1/19', '09:13:23'], 
		['23:43:51', '07:31:57', '2017/1/18', '07:48:06'], 
		['23:30:20', '08:11:11', '2017/1/17', '08:40:51'], 
		['22:24:18', '07:41:23', '2017/1/16', '09:17:05'], 
		['00:28:43', '07:20:44', '2017/1/15', '06:52:01'], 
		['22:30:03', '06:51:03', '2017/1/14', '08:21:00'], 
		['23:51:03', '07:45:03', '2017/1/13', '07:54:00'], 
		['01:16:21', '07:01:50', '2017/1/12', '05:45:29'], 
		['00:22:42', '07:22:45', '2017/1/11', '07:00:03'], 
		['23:24:59', '07:34:59', '2017/1/10', '08:10:00'], 
		['03:12:34', '08:08:34', '2017/1/9', '04:56:00'], 
		['23:42:50', '06:42:04', '2017/1/8', '06:59:14'], 
		['02:47:48', '09:43:20', '2017/1/7', '06:55:32'], 
		['23:26:07', '07:44:20', '2017/1/6', '08:18:13'], 
		['00:37:51', '07:05:51', '2017/1/5', '06:28:00'], 
		['00:41:03', '07:46:53', '2017/1/4', '07:05:50'], 
		['01:30:29', '07:31:12', '2017/1/3', '06:00:43'], 
		['22:55:51', '06:51:51', '2017/1/2', '07:56:00'], 
		['00:41:00', '08:04:11', '2017/1/1', '07:23:11'], 
		['23:51:24', '07:18:17', '2016/12/31', '07:26:53'], 
		['00:25:29', '07:19:51', '2016/12/30', '06:54:22'], 
		['23:42:21', '08:09:12', '2016/12/29', '08:26:51'], 
		['23:37:56', '07:11:22', '2016/12/28', '07:33:26'], 
//			['06:46:46', '07:05:46', '2016/12/27', '00:19:00'], 
		['01:09:45', '06:46:46', '2016/12/27', '05:37:01'], 
		['01:34:07', '08:27:21', '2016/12/26', '06:53:14'], 
		['03:20:31', '08:54:01', '2016/12/25', '05:33:30'], 
		['00:32:46', '09:09:39', '2016/12/24', '08:36:53'], 
		['01:30:51', '08:35:32', '2016/12/23', '07:04:41'], 
//			['00:29:16', '01:01:16', '2016/12/23', '00:32:00'], 
		['00:13:37', '06:56:40', '2016/12/22', '06:43:03'], 
		['00:21:21', '07:02:05', '2016/12/21', '06:40:44'], 
		['00:14:30', '06:22:36', '2016/12/20', '06:08:06'], 
		['23:54:12', '06:11:01', '2016/12/19', '06:16:49'], 
		['23:51:46', '08:06:15', '2016/12/18', '08:14:29'], 
		['23:42:10', '07:35:44', '2016/12/13', '07:53:34']							
	];

//		var sleepTime = data.forEach(item => )

	var option = {
		title: {
			text: 'Sleep Records'
		},
		tooltip: {
			trigger: 'axis',
//				formatter: (params) => {
//								console.log(params);
//							}
			formatter: function (params,ticket,callback) {
//					console.log(params);
//					var res = 'Function formatter : <br/>' + 
				var res = params[0].name;
				for (var i = 0, l = params.length; i < l-1; i++) {
					var date = new Date(params[i].data);
//						date = date.getHours();
					res += '<br/>' + params[i].seriesName + ' : ' + date.getHours() + ':' + date.getMinutes();
				}
				res += '<br/>' + params[params.length-1].seriesName + ' : ' + params[params.length-1].value + '小时';
//					setTimeout(function (){
//						// 仅为了模拟异步回调
//						callback(ticket, res);
//					}, 1000)
//					return 'loading';
				return res;
			}
		},
		legend: {
			data: ['Go to sleep', 'Get up', 'Sleep time']
		},
		grid: {
			show: true
		},
		xAxis: [
			{
				type: 'category',
				axisLable: {
					interval: 0
				},
				data: []
			}
		],
		yAxis: [
			{
				type: 'time',
				name: 'Time',
				min: new Date("2017/03/03 12:00"),
				max: new Date("2017/03/04 12:00"),
				axisLable: {
						formatter: function(value) {
							var date = new Date(value);
							date = date.getDate();
							return date;
						}
				}
//					interval: new Date("00:01")
			},
			{
				type: 'value',
				name: 'Duration ',
				min: 4,
				max: 11,
				axisLable: {
					show: true, 
					formatter: '{value} 小时'
				}
			}
		],
		series: [
			{
				name: 'Go to sleep',
				type: 'line',
				label: {
					normal: {
						formatter: (params) => {
							var text = new Date(params.data);
							text = text.getHours();
							console.log(text);
							return text;
						}
					}
				},
				data: []
			},
			{
				name: 'Get up',
				type: 'line',
				data: []
			},
			{
				name: 'Sleep time',
				type: 'bar',
				yAxisIndex: 1,
					itemStyle: {
					normal: {
						color: '#80cbc4'
					}
				},
				data: []
			}
		]
	};


	data.reverse();

	data.forEach(item => {
		option.xAxis[0].data.push(item[2]);
		if(item[0].slice(0, 1) != "0") {
			var date = new Date(`2017/03/03 ${item[0]}`);  //不为零，没过零点
		} else {
			var date = new Date(`2017/03/04 ${item[0]}`);  // 为零，过了零点
		}

		option.series["0"].data.push(date);
		option.series["1"].data.push(new Date(`2017/03/04 ${item[1]}`));
		var sleep = item[3].slice(0, 2) - 0 + item[3].slice(3, 5) / 60;
		option.series["2"].data.push(sleep);
	});
	myChart.setOption(option);
</script>